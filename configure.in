dnl Process this file with autoconf to produce a configure script.

AC_INIT(README)

AM_CONFIG_HEADER(header.h)
AM_INIT_AUTOMAKE(mapengine, 0.1.1.7)
AC_PREFIX_PROGRAM(gcc)

CXXFLAGS="-g -DSDL -D_REENTRANT -Wall -I/usr/local/include/SDL -I\$(top_srcdir)/src"
LIBS="-lSDL -lpthread"

dnl Checks for programs.
AC_PROG_CXX
AC_LANG_CPLUSPLUS
AC_PROG_CXXCPP
AC_PROG_MAKE_SET

dnl Checks for libraries.
AC_CHECK_LIB(pthread, main,, echo "Adonthell requires Pthreads library.  Exitting..."; exit 1)
AC_CHECK_LIB(SDL, main, , echo "Adonthell requires the  SDL library.  Exitting..."; exit 1)

SDLFLAG=no

AC_CHECK_LIB(SDLmixer,Mix_OpenAudio,
  SDLFLAG=yes
  LIBS="$LIBS -lSDLmixer"
  CXXFLAGS="$CXXFLAGS -DSDL_MIXER",)

AC_CHECK_LIB(SDL_mixer,Mix_OpenAudio,
  SDLFLAG=yes
  LIBS="$LIBS -lSDL_mixer"
  CXXFLAGS="$CXXFLAGS -DSDL_MIXER",)

AC_CHECK_HEADER(SDL/SDL.h)

if test x$SDLFLAG = xyes; then
  AC_CHECK_HEADERS([SDL/SDL_mixer.h SDL/SDL_audio.h])
fi

AC_SUBST(CXX)
AC_SUBST(CXXFLAGS)
AC_SUBST(CFLAGS)
AC_SUBST(LIBS)
AC_SUBST(SUBDIRS)

AC_OUTPUT([
Makefile
src/Makefile
])
