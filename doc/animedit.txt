

Adonthell Animation Editor

Alexandre Courbot

This document shortly describes the animation editor (animedit), it's
features, functions and internals.

1 Animation theory

Animations in Adonthell are made of two things: a dynamic array of
images (see the graphic_system document for more info about the image
class) and a dynamic array of animation_frames. An Animation frame
simply points to one of the above described images, and gives it some
extra parameters like masking or alpha level and some animation related
parameters (delay, next frame, etc...). When working with the animation
editor you'll have at first to load all the images you need for your
animation, then create a sequence of animation_frames to get your
animation. Both images and animation_frames are saved with your animation.
Why using two arrays of images and animation_frames instead of combining
the image and animation data into the same structure? Often in an
animation the same image appears but at different places in an animation,
or with a different delay or alpha level. As the raw image data is
disk expensive, this structure allow to keep disk space, while keeping
a good flexibility.

2 Editor functions

2.1 Calling the editor

Just call it with an optionnal animation filename argument.

./animedit <myanim.anim>

The editor can also be called as a module in others editor which use
animations. To call it from your editor (provided the screen is properly
initialized and the source has been compiled with the DEBUG flag)
simply call the ``editor()'' method from an animation object.

myanim.editor();

2.2 Editor layout

Your animation is displayed from the top-left part of the screen. A
transparent status window is available at the right of the screen,
which contains infos about the current mode.

2.3 Editor modes

As the animation structure has two main elements, the editor works
with two modes:

The Image Mode Allow you to add and delete images to your animation
  (F1).

The Frame Mode Allow you to add, delete and edit frames to your animation
  (F2).

2.4 Image Mode

While in this mode, you can (A)dd of (D)elete images. Simply press
``A'' to add an image. The editor will request a valid file name of
an image in PNM, raw format, then will ask for the position where
to insert it. Valid range is 0 (first image) to N+1 (where N is the
rank of the last image, to add it at the very end of the image array).
``D'' simply delete the current image, updating the frame array. The
left and right keys are used to navigate.

2.5 Frame Mode

``A'' allow you to add a frame at the end of the array, while ``D''
delete the current frame, updating the others' references.

A frame can be edited with the following keys:

Left/Right Keys Select previous/next frame.

Keypad +/- Makes the frame point to the next/previous image in the
  image array.

Up/Down Keys Increase/decrease the frame's delay. A delay of 0 means
  the animation will stay on this frame forever or until a next_frame()
  is performed.

Home/End Select the next/previous frame as the frame next the current
  one.

Insert Toggle mask on/off.

PageUp/PageDown Increase/decrease the alpha value. Please note that
  a alpha value > 0 eats quite some CPU, so be carefull while using
  it, as an alpha value of 1 of nearly as opaque as a 0.

P Plays the animation, allowing you to see the result.

O Stop the animation.

I Rewind the animation.

All these control can be accelerated by pushing the Left Ctrl key while
pushing them.

2.6 Common Keys

Left/Right Keys Select previous/next image/frame.

F1 Switch to image mode.

F2 Switch to frame mode.

A Add an image/frame.

D Delete an image/frame.

F5 Save animation.

F6 Load animation.

Esc Quit the editor.
